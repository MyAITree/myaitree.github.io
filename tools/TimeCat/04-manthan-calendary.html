<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calendar Maker â€” Single Page (Class-based JS)</title>
  <style>
    :root{--accent:#c0392b;--muted:#777;--bg:#f6f7f9;--card:#fff}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;margin:0;background:var(--bg);color:#222}
    .app{display:flex;gap:20px;padding:20px;max-width:1200px;margin:0 auto}
    .panel{width:360px;background:var(--card);border-radius:8px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    .preview{flex:1;min-height:640px;background:linear-gradient(180deg,#fff 0,#f9fafb 100%);border-radius:8px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    h2{margin:0 0 12px;font-size:18px}
    label{display:block;margin:10px 0 6px;font-size:13px;color:var(--muted)}
    input[type="text"],select,input[type="number"]{width:100%;padding:8px;border-radius:6px;border:1px solid #ddd;background:#fff}
    .row{display:flex;gap:8px}
    .small{width:100px}
    .checkbox-row{display:flex;gap:8px;flex-wrap:wrap}
    .designs{display:flex;gap:8px;margin-top:10px}
    .design{flex:1;padding:8px;border-radius:6px;border:1px dashed #ddd;text-align:center;cursor:pointer}
    .design.selected{border-style:solid;background:#f8f8f8}
    .calendar-frame{border:1px solid #ddd;border-radius:6px;padding:12px;background:white;height:600px;overflow:auto}
    .cal-header{display:flex;justify-content:space-between;align-items:center}
    .month-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:12px}
    .day-cell{min-height:70px;border:1px solid #eee;padding:6px;border-radius:4px}
    .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:12px;color:var(--muted);font-weight:600}
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:#fff;border:none;cursor:pointer}
    footer.note{margin-top:12px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="app">
    <aside class="panel">
      <h2>Calendar Options</h2>

      <label>Title (optional)</label>
      <input id="title" type="text" placeholder="Add a title..." />

      <label>Country</label>
      <select id="country">
        <option>India</option>
        <option>United States</option>
        <option>United Kingdom</option>
      </select>

      <div class="row" style="margin-top:8px">
        <div style="flex:1">
          <label>Year</label>
          <input id="year" type="number" value="2025" />
        </div>
        <div class="small">
          <label>Months</label>
          <input id="months" type="number" min="1" max="12" value="1" />
        </div>
      </div>

      <label>First month</label>
      <select id="firstMonth"></select>

      <label style="margin-top:10px">Colors legend</label>
      <div style="display:flex;gap:8px;align-items:center"><div style="width:14px;height:14px;background:#e74c3c;border-radius:3px"></div><div style="font-size:13px;color:var(--muted)">Federal holidays</div></div>
      <div style="display:flex;gap:8px;align-items:center;margin-top:6px"><div style="width:14px;height:14px;background:#3498db;border-radius:3px"></div><div style="font-size:13px;color:var(--muted)">Local holidays</div></div>

      <label>Holidays & observances</label>
      <div class="checkbox-row">
        <label><input type="checkbox" id="national" checked/> National holidays</label>
        <label><input type="checkbox" id="weekend" checked/> Mark weekends</label>
        <label><input type="checkbox" id="common" checked/> Common local holidays</label>
        <label><input type="checkbox" id="importantObs" checked/> Important observances</label>
      </div>

      <label>Design</label>
      <div class="designs">
        <div class="design selected" data-id="1">Design 1</div>
        <div class="design" data-id="2">Design 2</div>
        <div class="design" data-id="3">Design 3</div>
      </div>

      <label style="margin-top:10px">Text & print</label>
      <div class="row">
        <select id="lang" style="flex:1"><option>English</option><option>Hindi</option></select>
        <select id="fontSize"><option>Larger Font Size</option><option>Normal</option></select>
      </div>

      <label style="margin-top:8px">Print settings</label>
      <div class="row">
        <select id="paper"><option>A4</option><option>Letter</option></select>
        <select id="colorMode"><option>Print Color</option><option>Black & White</option></select>
      </div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
        <button id="render" class="btn">Render</button>
        <button id="download" class="btn" style="background:#27ae60">Download (Print)</button>
      </div>

      <footer class="note">Tip: Click render after changing options. Use browser Print to save as PDF.</footer>
    </aside>

    <main class="preview">
      <h2 style="margin-top:0">Preview</h2>
      <div id="calendarFrame" class="calendar-frame">
        <!-- calendar will be rendered here -->
      </div>
    </main>
  </div>

  <script>
    // -----------------------------
    // Utilities
    // -----------------------------
    const MONTHS = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    const WEEKDAYS = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];

    // small demo holiday data for India (only a couple shown)
    const HOLIDAYS = {
      India: {
        '2025-01-26': 'Republic Day',
        '2025-08-15': 'Independence Day',
        '2025-10-02': 'Gandhi Jayanti'
      }
    };

    // -----------------------------
    // CalendarRenderer - pure DOM renderer
    // -----------------------------
    class CalendarRenderer {
      constructor(container){this.container = container}

      clear(){this.container.innerHTML = ''}

      renderMonth(year, monthIndex, opts){
        const wrapper = document.createElement('div');
        const header = document.createElement('div');header.className='cal-header';
        const title = document.createElement('div');title.innerHTML = `<strong>${MONTHS[monthIndex]} ${year}</strong>`;
        const legend = document.createElement('div');legend.style.color='var(--muted)';legend.textContent = opts.title || '';
        header.appendChild(title);header.appendChild(legend);

        const weekdays = document.createElement('div');weekdays.className='weekdays';
        for(const d of WEEKDAYS){const w=document.createElement('div');w.textContent=d;weekdays.appendChild(w)}

        const grid = document.createElement('div');grid.className='month-grid';

        // compute first day (Mon=0) and days in month
        const first = new Date(year, monthIndex, 1);
        // JS getDay: 0 Sun - 6 Sat. We want Mon=0 index
        let offset = (first.getDay() + 6) % 7; // shift Sunday->6, Monday->0
        const daysInMonth = new Date(year, monthIndex+1, 0).getDate();

        // fill leading blanks
        for(let i=0;i<offset;i++){const cell=document.createElement('div');cell.className='day-cell';grid.appendChild(cell)}

        for(let d=1;d<=daysInMonth;d++){
          const dateStr = `${year}-${String(monthIndex+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
          const cell=document.createElement('div');cell.className='day-cell';
          const top = document.createElement('div');top.style.fontWeight='700';top.textContent=d;cell.appendChild(top);

          // mark holidays
          if(opts.holidays && HOLIDAYS[opts.country] && HOLIDAYS[opts.country][dateStr]){
            const h = document.createElement('div');h.textContent = HOLIDAYS[opts.country][dateStr];h.style.fontSize='12px';h.style.marginTop='6px';h.style.color='#e74c3c';cell.appendChild(h);
          }

          // mark weekends
          const weekdayIndex = (offset + d - 1) % 7; // 0..6 Mon..Sun
          if(opts.markWeekend && (weekdayIndex==5 || weekdayIndex==6)){
            cell.style.background='#fbfbfd';
            const badge = document.createElement('div');badge.textContent = weekdayIndex==5? 'Sat':'Sun';badge.style.fontSize='11px';badge.style.color='var(--muted)';cell.appendChild(badge);
          }

          grid.appendChild(cell);
        }

        wrapper.appendChild(header);
        wrapper.appendChild(weekdays);
        wrapper.appendChild(grid);
        this.container.appendChild(wrapper);
      }
    }

    // -----------------------------
    // CalendarApp - orchestrates UI and rendering
    // -----------------------------
    class CalendarApp {
      constructor(){
        // cached elements
        this.dom = {
          title: document.getElementById('title'),
          country: document.getElementById('country'),
          year: document.getElementById('year'),
          months: document.getElementById('months'),
          firstMonth: document.getElementById('firstMonth'),
          national: document.getElementById('national'),
          weekend: document.getElementById('weekend'),
          common: document.getElementById('common'),
          importantObs: document.getElementById('importantObs'),
          designs: document.querySelectorAll('.design'),
          lang: document.getElementById('lang'),
          fontSize: document.getElementById('fontSize'),
          paper: document.getElementById('paper'),
          colorMode: document.getElementById('colorMode'),
          renderBtn: document.getElementById('render'),
          downloadBtn: document.getElementById('download'),
          frame: document.getElementById('calendarFrame')
        };

        this.renderer = new CalendarRenderer(this.dom.frame);
        this.state = {selectedDesign:1};

        this.init();
      }

      init(){
        // populate months select
        MONTHS.forEach((m,i)=>{
          const o = document.createElement('option');o.value=i;o.textContent=m;this.dom.firstMonth.appendChild(o)
        });

        // wire design clicks
        this.dom.designs.forEach(d=>d.addEventListener('click',e=>{
          this.dom.designs.forEach(x=>x.classList.remove('selected'));
          d.classList.add('selected');
          this.state.selectedDesign = Number(d.dataset.id);
        }));

        // render on click
        this.dom.renderBtn.addEventListener('click',()=>this.render());
        // also allow download/print
        this.dom.downloadBtn.addEventListener('click',()=>window.print());

        // initial render
        this.render();
      }

      collectOptions(){
        return {
          title: this.dom.title.value.trim(),
          country: this.dom.country.value,
          year: Number(this.dom.year.value) || new Date().getFullYear(),
          months: Math.max(1, Math.min(12, Number(this.dom.months.value)||1)),
          firstMonth: Number(this.dom.firstMonth.value)||0,
          holidays: this.dom.national.checked,
          markWeekend: this.dom.weekend.checked,
          commonLocal: this.dom.common.checked,
          importantObs: this.dom.importantObs.checked,
          design: this.state.selectedDesign,
          lang: this.dom.lang.value,
          fontSize: this.dom.fontSize.value,
          paper: this.dom.paper.value,
          colorMode: this.dom.colorMode.value
        }
      }

      render(){
        const opts = this.collectOptions();
        this.renderer.clear();

        // render N months starting from firstMonth
        for(let i=0;i<opts.months;i++){
          const monthIndex = (opts.firstMonth + i) % 12;
          const year = opts.year + Math.floor((opts.firstMonth + i)/12);
          this.renderer.renderMonth(year, monthIndex, opts);
        }
      }
    }

    // instantiate app
    document.addEventListener('DOMContentLoaded',()=>new CalendarApp());
  </script>
</body>
</html>
